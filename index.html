<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Contador Gamer Neón</title>
    <link rel="stylesheet" href="style.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4287146849301985"
     crossorigin="anonymous"></script>
</head>
<body>
    <nav class="menu">
    <a href="index.html">Contador</a>
    <a href="game.html">Juego</a>
    <a href="password.html">Generar Contraseña</a>
    <a href="time.html">Cronómetro / Temporizador</a>
</nav>

<div class="toggle-container">
    <label class="switch">
        <input type="checkbox" id="themeToggle">
        <span class="slider"></span>
    </label>
    <span class="toggle-text">Modo Oscuro/Claro</span>
</div>

<div class="card">
    <h2 class="title">CONTADOR GAMER</h2>

    <div id="contador" class="contador">0</div>

    <button onclick="sumar()" class="btn click">¡Clic!</button>
    <button class="btn reset" onclick="reiniciar()">Reiniciar</button>

    <audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_37f69bc634.mp3?filename=click-124467.mp3"></audio>
</div>

<!-- Canvas para los fuegos artificiales -->
<canvas id="fireworksCanvas"></canvas>

<script>
    let numero = 0;
    const contador = document.getElementById("contador");
    const clickSound = document.getElementById("clickSound");

    // Cargar número guardado
    if (localStorage.getItem("contadorValor")) {
        numero = parseInt(localStorage.getItem("contadorValor"));
        contador.textContent = numero;
    }

    // Animación normal al sumar 1
    function animarSubida() {
        contador.classList.add("anim-subida");
        setTimeout(() => contador.classList.remove("anim-subida"), 200);
    }

    // Animación META (cada múltiplo de 10)
    function animarMeta() {
        contador.classList.add("anim-meta");
        setTimeout(() => contador.classList.remove("anim-meta"), 800);
    }

    function sumar() {
        numero++;
        contador.textContent = numero;
        localStorage.setItem("contadorValor", numero);

        clickSound.currentTime = 0;
        clickSound.play();

        // Animación normal
        animarSubida();

        // Animación especial cada múltiplo de 10
        if (numero % 10 === 0) {
            animarMeta();
        }

        // Fuegos artificiales en 100
        if (numero === 100) {
            lanzarFuegosArtificiales();
        }
    }

    function reiniciar() {
        numero = 0;
        contador.textContent = 0;
        localStorage.setItem("contadorValor", 0);
        animarSubida();
    }

    // Modo oscuro / claro
    const themeToggle = document.getElementById("themeToggle");
    themeToggle.addEventListener("change", () => {
        document.body.classList.toggle("light");
    });

    // --------------------------
    // FUEGOS ARTIFICIALES
    // --------------------------
    const canvas = document.getElementById("fireworksCanvas");
    const ctx = canvas.getContext("2d");

    function ajustarCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    ajustarCanvas();
    window.onresize = ajustarCanvas;

    class Particula {
        constructor(x, y) {
            this.x = x;
            this.y = y;
            this.velX = (Math.random() - 0.5) * 8;
            this.velY = (Math.random() - 0.5) * 8;
            this.alpha = 1;
            this.tamano = 3 + Math.random() * 4;
            this.color = "hsl(" + Math.random() * 360 + ", 100%, 60%)";
        }

        actualizar() {
            this.x += this.velX;
            this.y += this.velY;
            this.velY += 0.05;
            this.alpha -= 0.015;
        }

        dibujar() {
            ctx.globalAlpha = this.alpha;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.tamano, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.fill();
        }
    }

    let particulas = [];

    function lanzarFuegosArtificiales() {
        const x = canvas.width / 2;
        const y = canvas.height / 2;

        for (let i = 0; i < 80; i++) {
            particulas.push(new Particula(x, y));
        }
    }

    function animarFuegos() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        particulas = particulas.filter(p => p.alpha > 0);

        particulas.forEach(p => {
            p.actualizar();
            p.dibujar();
        });

        requestAnimationFrame(animarFuegos);
    }

    animarFuegos();
</script>

</body>
</html>
