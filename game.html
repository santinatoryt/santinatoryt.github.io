<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Juego 2D - Nave y Asteroides</title>
<link rel="stylesheet" href="style.css">

<style>
body {
    background:#111;
    color:white;
    font-family:Arial;
    text-align:center;
}
canvas {
    background:#000;
    display:block;
    margin:20px auto;
    border:3px solid #00eaff;
    border-radius:10px;
}
.btn {
    padding:10px 20px;
    background:#00eaff;
    border:none;
    border-radius:5px;
    cursor:pointer;
    margin-top:10px;
    color:black;
    font-weight:bold;
}
</style>
</head>

<body>
    
     <nav class="menu">
    <a href="index.html">Contador</a>
    <a href="game.html">Juego</a>
    <a href="password.html">Generar Contrase침a</a>
    <a href="time.html">Cron칩metro / Temporizador</a>
</nav>

<h2>游깳 Nave vs Asteroides</h2>

<canvas id="game" width="500" height="400"></canvas>
<p id="scoreText"></p>
<p id="lifeText"></p>
<button onclick="resetGame()" class="btn">Reiniciar</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// --- JUGADOR (COHETE) ---
let player = { x: 50, y: 160, w: 25, h: 25, speed: 4, life: 3 };

// --- LISTAS ---
let asteroids = [];
let bullets = [];

let score = 0;
let gameOver = false;

// --- MOVIMIENTO ---
let up = false, down = false;

// TECLAS
document.addEventListener("keydown", e => {
    if (e.key === "ArrowUp") up = true;
    if (e.key === "ArrowDown") down = true;
    if (e.key === " ") shoot(); // disparar
});
document.addEventListener("keyup", e => {
    if (e.key === "ArrowUp") up = false;
    if (e.key === "ArrowDown") down = false;
});

// --- DISPARAR ---
function shoot() {
    bullets.push({
        x: player.x + player.w,
        y: player.y + player.h / 2,
        w: 8,
        h: 3,
        speed: 6
    });
}

// --- CREAR ASTEROIDES ---
function spawnAsteroid() {
    const r = Math.random();

    let type;
    if (r < 0.33) type = "small";     // 1 vida
    else if (r < 0.66) type = "medium"; // 2 vidas
    else type = "large";               // 3 vidas

    let size = type === "large" ? 45 :
               type === "medium" ? 30 : 18;

    let hp = type === "large" ? 3 :
             type === "medium" ? 2 : 1;

    asteroids.push({
        x: 500,
        y: Math.random() * 360,
        w: size,
        h: size,
        speed: 2 + Math.random() * 2,
        hp: hp,
        type: type
    });
}

setInterval(spawnAsteroid, 900);

// --- LOOP ---
function loop() {
    if (gameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // --- Mover jugador ---
    if (up && player.y > 0) player.y -= player.speed;
    if (down && player.y + player.h < canvas.height) player.y += player.speed;

    // DIBUJAR COHETE
    ctx.fillStyle = "#00eaff";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    // --- BALAS ---
    bullets.forEach((b, bi) => {
        b.x += b.speed;
        ctx.fillStyle = "yellow";
        ctx.fillRect(b.x, b.y, b.w, b.h);

        if (b.x > 500) bullets.splice(bi, 1);
    });

    // --- ASTEROIDES ---
    asteroids.forEach((a, i) => {
        a.x -= a.speed;

        // Color seg칰n tipo
        ctx.fillStyle =
            a.type === "large"  ? "#a33" :
            a.type === "medium" ? "#d55" : "#f77";

        ctx.beginPath();
        ctx.arc(a.x, a.y, a.w/2, 0, Math.PI * 2);
        ctx.fill();

        // --- COLISI칍N CON EL JUGADOR ---
        if (
            player.x < a.x + a.w/2 &&
            player.x + player.w > a.x - a.w/2 &&
            player.y < a.y + a.h/2 &&
            player.y + player.h > a.y - a.h/2
        ) {
            // da침o seg칰n tama침o
            if (a.type === "large") player.life -= 3;
            if (a.type === "medium") player.life -= 2;
            if (a.type === "small") player.life -= 1;

            asteroids.splice(i, 1);
            updateHUD();

            if (player.life <= 0) {
                gameOver = true;
                document.getElementById("scoreText").textContent =
                    "游 Perdiste. Puntuaci칩n: " + score;
            }
        }

        // --- COLISI칍N CON BALAS ---
        bullets.forEach((b, bi) => {
            if (
                b.x < a.x + a.w/2 &&
                b.x + b.w > a.x - a.w/2 &&
                b.y < a.y + a.h/2 &&
                b.y + b.h > a.y - a.h/2
            ) {
                a.hp--;
                bullets.splice(bi, 1);

                if (a.hp <= 0) {
                    asteroids.splice(i, 1);
                    score++;
                    updateHUD();
                }
            }
        });

        if (a.x + a.w < 0) asteroids.splice(i, 1);
    });

    requestAnimationFrame(loop);
}

function updateHUD() {
    document.getElementById("scoreText").textContent = "Puntuaci칩n: " + score;
    document.getElementById("lifeText").textContent = "仇벒잺 Vidas: " + player.life;
}

// --- REINICIAR ---
function resetGame() {
    score = 0;
    player.life = 3;
    asteroids = [];
    bullets = [];
    gameOver = false;
    updateHUD();
    loop();
}

updateHUD();
loop();
</script>

</body>
</html>
