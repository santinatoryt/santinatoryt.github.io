<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Juego 2D - Esquivar Obst√°culos</title>
<link rel="stylesheet" href="style.css">
<style>
body {
    background:#111;
    color:white;
    font-family:Arial;
    text-align:center;
}
canvas {
    background:#222;
    display:block;
    margin:20px auto;
    border:3px solid #00eaff;
    border-radius:10px;
}
.btn {
    padding:10px 20px;
    background:#00eaff;
    border:none;
    border-radius:5px;
    cursor:pointer;
    margin-top:10px;
    color:black;
    font-weight:bold;
}
</style>
</head>

<body>

<nav class="menu">
    <a href="index.html">Contador</a>
    <a href="game.html">Juego</a>
    <a href="password.html">Generar Contrase√±a</a>
    <a href="time.html">Cron√≥metro / Temporizador</a>
</nav>

<h2>Juego 2D ‚Äì Evita los Obst√°culos</h2>

<canvas id="game" width="400" height="400"></canvas>
<button onclick="resetGame()" class="btn">Reiniciar</button>
<p id="scoreText"></p>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = { x: 50, y: 180, w: 20, h: 20, speed: 4 };
let obstacles = [];
let score = 0;
let gameOver = false;

// Movimientos
let up = false, down = false;

document.addEventListener("keydown", e => {
    if (e.key === "ArrowUp") up = true;
    if (e.key === "ArrowDown") down = true;
});
document.addEventListener("keyup", e => {
    if (e.key === "ArrowUp") up = false;
    if (e.key === "ArrowDown") down = false;
});

function loop() {
    if (gameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // --- Mover jugador ---
    if (up && player.y > 0) player.y -= player.speed;
    if (down && player.y + player.h < canvas.height) player.y += player.speed;

    ctx.fillStyle = "#00eaff";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    // --- Crear obst√°culos ---
    if (Math.random() < 0.03) {
        obstacles.push({
            x: 400,
            y: Math.random() * 360,
            w: 20,
            h: 40,
            speed: 3 + Math.random() * 2
        });
    }

    // --- Mover obst√°culos ---
    obstacles.forEach((o, i) => {
        o.x -= o.speed;
        ctx.fillStyle = "#ff0044";
        ctx.fillRect(o.x, o.y, o.w, o.h);

        // Colisi√≥n
        if (
            player.x < o.x + o.w &&
            player.x + player.w > o.x &&
            player.y < o.y + o.h &&
            player.y + player.h > o.y
        ) {
            gameOver = true;
            document.getElementById("scoreText").textContent =
                "üò¢ Perdiste. Puntuaci√≥n: " + score;
        }

        if (o.x + o.w < 0) {
            obstacles.splice(i, 1);
            score++;
        }
    });

    if (!gameOver) requestAnimationFrame(loop);
}

function resetGame() {
    player.y = 180;
    obstacles = [];
    score = 0;
    gameOver = false;
    document.getElementById("scoreText").textContent = "";
    loop();
}

loop();
</script>

</body>
</html>
